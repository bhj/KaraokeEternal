.container {
  --image-width: 104px;
  --queue-item-btn-size: 48px;

  position: relative;
  /* 104px */
  height: 6.5rem;
  display: flex;
  align-items: center;
  overflow: hidden;
  background-color: hsl(var(--hue-blue), 40%, 6%);
  margin: var(--space-s) 0;
  line-height: normal;
}

.content {
  display: flex;
  flex: 1;
  margin: 0.5rem 0 0.5rem var(--space-s);
  overflow: hidden;
}

.greyed {
  opacity: .5;
}

.imageContainer {
  position: relative;
  display: flex;
  justify-content: center;
  width: var(--image-width);
  aspect-ratio: 4 / 3;
  overflow: hidden;

  img {
    width: 100%;
    height: 100%;
  }
}

.waitContainer {
  position: absolute;
  bottom: 0;
  right: 0;
  background-color: rgba(0, 0, 0, 0.6);
  border-top-left-radius: var(--border-radius);
}

.wait {
  color: var(--color-gray-7);
  font-size: var(--font-size-s);
  padding: var(--space-xs);
}

.primary {
  flex: 1;
  display: flex;
  flex-direction: column;
  margin-left: var(--container-padding);
  overflow: hidden;
}

.innerPrimary {
  flex: 1;
}

.title {
  color: var(--color-gray-9);
  font-size: 1.25rem;
}

.artist {
  color: var(--color-gray-7);
  font-size: 1.125rem;
}

.user {
  font-size: var(--font-size-s);
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
  color: var(--color-gray-5);
  margin-bottom: 0.25rem;
}

.isOwner {
  color: var(--queued-item-color);
  text-shadow: var(--text-shadow-glow);
}

.title,
.artist,
.user {
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
}

/* Buttons */
.btnContainer {
  button {
    position: relative;
    width: var(--queue-item-btn-size);
    height: var(--queue-item-btn-size);
    color: var(--song-item-btn-bg-color);
  }

  button.active {
    color: var(--song-item-btn-active-bg-color);
    filter: var(--song-item-btn-active-filter);
  }

  button.danger {
    color: var(--btn-danger-bg-color);
    filter: var(--btn-danger-filter);
  }

  svg {
    width: var(--queue-item-btn-size);
    height: var(--queue-item-btn-size);
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: none;
  }
}

.btnAdd svg,
.btnPlayNext svg {
  width: 60px;
  height: 60px;
}

.btnMove svg {
  width: 56px;
  height: 56px;
}

.btnRemove svg {
  width: 52px;
  height: 52px;
}

.animateStar {
  animation: var(--animation-btn-star);
  will-change: transform;
}

/* Currently playing  */
.container.current {
  /* Added 1% tail fade (99% -> 100%) */
  background-image: linear-gradient(to right,
      hsl(var(--hue-blue), 100%, 20%) 99%,
      transparent 100%);
  background-repeat: no-repeat;
  background-size: var(--progress, 0%) 100%;
}

.container.current::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: auto;
  width: var(--progress, 0%);
  --queue-item-crawl-span: 300%;
  --queue-item-shine-width: 55vw;
  /* Tile must exceed shine width; gap factor creates transparent buffer so repeat is seamless */
  --queue-item-gap-factor: 1.5;
  --queue-item-tile-size: calc(var(--queue-item-shine-width) * var(--queue-item-gap-factor));
  /* Soften trailing edge of shine (fade last 1%) */
  -webkit-mask-image: linear-gradient(to right, #000 0%, #000 99%, rgba(0, 0, 0, 0) 100%);
  mask-image: linear-gradient(to right, #000 0%, #000 99%, rgba(0, 0, 0, 0) 100%);
  /* Slightly reduced alpha of shine for overall softness */
  background: linear-gradient(90deg,
      transparent 0%,
      transparent calc(50% - (var(--queue-item-shine-width) / 2)),
      rgba(255, 255, 255, 0.55) 50%,
      transparent calc(50% + (var(--queue-item-shine-width) / 2)),
      transparent 100%);
  /* Use the computed tile size so the shine fully fits inside one repeat */
  background-size: var(--queue-item-tile-size) 100%;
  background-repeat: repeat-x;
  animation: queueItemCrawl 3s linear infinite;
  will-change: background-position;
  mix-blend-mode: overlay;
  opacity: 0.85;
}

.container.current.paused::after {
  animation-play-state: paused;
}

@keyframes queueItemCrawl {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: var(--queue-item-tile-size) 0;
  }
}